# =============================================================================
# Intelligent Crawl4AI Agent - Docker Environment Configuration
# =============================================================================
# Copy this file to .env and configure for your environment

# =============================================================================
# Application Settings
# =============================================================================
APP_ENV=production
LOG_LEVEL=INFO
DEBUG=false

# =============================================================================
# MCP Server Configuration
# =============================================================================
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=8811
MCP_TIMEOUT=300

# =============================================================================
# Database Configuration
# =============================================================================
# Database type: auto, sqlite, postgresql
DATABASE_TYPE=auto

# SQLite (standalone mode)
SQLITE_PATH=/app/data/sqlite/intelligent_agent.db

# PostgreSQL (distributed mode)
POSTGRES_DB=intelligent_scraping
POSTGRES_USER=scraper_user
POSTGRES_PASSWORD=secure_password_123
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_URL=postgresql://scraper_user:secure_password_123@postgres:5432/intelligent_scraping

# =============================================================================
# AI Services Configuration
# =============================================================================

# Ollama Local AI
OLLAMA_URL=http://ollama:11434
OLLAMA_MODEL=llama3.1
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# ChromaDB Vector Database
CHROMADB_URL=http://chromadb:8000
CHROMADB_TOKEN=test-token
CHROMADB_COLLECTION=intelligent_scraping

# =============================================================================
# Cache and Queue Configuration
# =============================================================================

# Redis
REDIS_URL=redis://redis:6379
REDIS_DB=0
CACHE_TTL=3600

# =============================================================================
# Browser Configuration
# =============================================================================
BROWSER_HEADLESS=true
BROWSER_TIMEOUT=30000
MAX_BROWSER_INSTANCES=20
BROWSER_POOL_URLS=http://browser-pool-1:3000,http://browser-pool-2:3000

# Browser tokens for authentication
BROWSER_TOKEN_1=browser_token_1
BROWSER_TOKEN_2=browser_token_2

# =============================================================================
# Strategy Configuration
# =============================================================================
DEFAULT_STRATEGY=smart_hybrid
ENABLE_REGEX_FAST_MODE=true
STRATEGY_CONFIDENCE_THRESHOLD=0.7
MAX_RETRIES_PER_STRATEGY=3

# Strategy-specific settings
REGEX_MAX_MATCHES_PER_PATTERN=50
LLM_MAX_TOKENS=2048
CSS_SELECTOR_TIMEOUT=10000

# =============================================================================
# High-Volume Processing
# =============================================================================
MAX_WORKERS=10
MAX_CONCURRENT_PER_WORKER=10
CONCURRENT_EXTRACTIONS=5
MAX_CONCURRENT_REQUESTS=100

# Rate limiting
RATE_LIMIT_PER_MINUTE=60
REQUEST_TIMEOUT=60
RETRY_ATTEMPTS=3

# =============================================================================
# External Services (Optional)
# =============================================================================

# CAPTCHA Solving
CAPTCHA_API_KEY=your_2captcha_api_key_here
CAPTCHA_SERVICE_URL=http://2captcha.com

# Proxy Services
PROXY_USERNAME=your_proxy_username
PROXY_PASSWORD=your_proxy_password
PROXY_ENDPOINTS=proxy1.example.com:8080,proxy2.example.com:8080

# =============================================================================
# Monitoring and Metrics
# =============================================================================
ENABLE_METRICS=true
METRICS_PORT=8812
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# Prometheus
PROMETHEUS_PUSHGATEWAY_URL=http://prometheus:9090

# =============================================================================
# Security Settings
# =============================================================================

# API Keys and tokens
API_SECRET_KEY=change_this_secret_key_in_production
JWT_SECRET=change_this_jwt_secret_in_production

# CORS settings
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# File Storage
# =============================================================================
UPLOAD_MAX_SIZE=10485760
SCREENSHOT_QUALITY=80
EXPORT_FORMAT=json

# Storage paths (inside container)
DATA_PATH=/app/data
LOGS_PATH=/app/logs
SCREENSHOTS_PATH=/app/screenshots
EXPORTS_PATH=/app/exports

# =============================================================================
# Development Settings (only for development environment)
# =============================================================================
# Uncomment for development mode

# APP_ENV=development
# LOG_LEVEL=DEBUG
# DEBUG=true
# RELOAD_ON_CHANGE=true
# ENABLE_DEBUG_TOOLBAR=true

# Debug ports
# DEBUG_PORT=5678

# Development database (SQLite for quick testing)
# DATABASE_TYPE=sqlite
# SQLITE_PATH=/app/data/dev.db

# =============================================================================
# Performance Tuning
# =============================================================================

# Memory limits (for container resource management)
MAX_MEMORY_MB=4096
MAX_CPU_CORES=2

# Threading and async settings
THREAD_POOL_SIZE=20
MAX_ASYNC_CONNECTIONS=100

# Garbage collection
ENABLE_GC_OPTIMIZATION=true
GC_THRESHOLD_0=700
GC_THRESHOLD_1=10
GC_THRESHOLD_2=10

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_FORMAT=json
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30
LOG_MAX_SIZE_MB=100

# Log levels for different components
LOG_LEVEL_STRATEGIES=INFO
LOG_LEVEL_MCP=INFO
LOG_LEVEL_DATABASE=WARNING
LOG_LEVEL_BROWSER=WARNING

# =============================================================================
# Advanced Features
# =============================================================================

# Machine Learning optimization
ENABLE_ML_OPTIMIZATION=true
MODEL_CACHE_SIZE=1000

# Content analysis
ENABLE_CONTENT_ANALYSIS=true
LANGUAGE_DETECTION=true
SENTIMENT_ANALYSIS=false

# Data export features
ENABLE_CSV_EXPORT=true
ENABLE_EXCEL_EXPORT=true
ENABLE_JSON_EXPORT=true
ENABLE_XML_EXPORT=false

# =============================================================================
# Backup and Recovery
# =============================================================================
ENABLE_AUTO_BACKUP=false
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=7
BACKUP_PATH=/app/data/backups

# =============================================================================
# Notifications (Optional)
# =============================================================================
# Email notifications
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USERNAME=notifications@example.com
# SMTP_PASSWORD=your_smtp_password
# SMTP_FROM_ADDRESS=intelligent-agent@example.com

# Slack notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Discord notifications
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/WEBHOOK

# =============================================================================
# Custom Configuration
# =============================================================================
# Add your custom environment variables below

# CUSTOM_SETTING_1=value1
# CUSTOM_SETTING_2=value2
